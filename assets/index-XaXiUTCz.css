:root{--ui-offset: clamp(.5rem, 5vw, 1rem);--toolbar-padding: clamp(.25rem, 3vw, .9rem);--ui-gap: clamp(.25rem, 3vw, .8rem);--ui-radius: clamp(.5rem, 3vw, 1rem);--icon-size: clamp(1rem, 4vw, 1.5rem);--font-scale: clamp(.9rem, 1vw, .8rem);--color-bg: #ffffff;--color-fg: #333333;--color-primary: #51247A;--color-secondary: #CBAE88;--color-panel: rgba(255, 255, 255, .95);--canvas-bg: #ffffff;--color-tooltip-bg: white;--color-tooltip-fg: var(--color-primary);--shadow-popup: 0 6px 20px rgba(0, 0, 0, .12);--shadow-ui: 0 8px 20px rgba(0, 0, 0, .1);--color-scale-bar: black;--viewer2d-bg: #ffffff;--font-base: "Open Sans", sans-serif;--anim-duration: .5s;--anim-ease: ease-out;--toolbar-icon-size: clamp(1.25rem, 1vw, 3rem);--toolbar-padding: clamp(.25rem, 3vw, .7rem);--toolbar-height: calc( var(--toolbar-icon-size) + var(--toolbar-padding) * 2 );--scale-bar-gap: clamp(1rem, 3vw, 1rem);--toggle-height: calc( var(--font-scale) + var(--ui-padding) * 3 );--sample-name-gap: clamp(.75rem, 5vw, 1.5rem)}:root[data-theme=dark]{--ui-offset: clamp(.5rem, 5vw, 1rem);--toolbar-padding: clamp(.25rem, 3vw, .9rem);--ui-gap: clamp(.25rem, 3vw, .8rem);--ui-radius: clamp(.5rem, 3vw, 1rem);--icon-size: clamp(1rem, 4vw, 1.5rem);--font-scale: clamp(.9rem, 1vw, .8rem);--color-bg: #1a1a1a;--color-fg: #eeeeee;--color-primary: #CBAE88;--color-secondary: #51247A;--color-panel: rgba(30, 30, 30, .95);--canvas-bg: #121212;--color-tooltip-bg: #1f1f1f;--color-tooltip-fg: var(--color-primary);--shadow-popup: 0 6px 20px rgba(0, 0, 0, .6);--shadow-ui: 0 8px 20px rgba(0, 0, 0, .4);--color-scale-bar: var(--color-fg);--viewer2d-bg: #1a1a1a;--toolbar-icon-size: clamp(1.25rem, 1vw, 3rem);--toolbar-padding: clamp(.25rem, 3vw, .7rem);--toolbar-height: calc( var(--toolbar-icon-size) + var(--toolbar-padding) * 2 );--scale-bar-gap: clamp(1rem, 3vw, 1rem);--toggle-height: calc( var(--font-scale) + var(--ui-padding) * 3 );--sample-name-gap: clamp(.75rem, 5vw, 1.5rem)}@keyframes fadeIn{0%{opacity:0;transform:translate(-50%) translateY(20px)}to{opacity:1;transform:translate(-50%) translateY(0)}}@keyframes dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}to{stroke-dasharray:90,150;stroke-dashoffset:-124}}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes pulse{0%,to{box-shadow:0 0 #51247a4d}50%{box-shadow:0 0 0 8px #51247a00}}.centered{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.btn-hover-scale{transition:transform .2s ease,box-shadow .2s ease}.btn-hover-scale:hover{transform:scale(1.1);box-shadow:0 4px 12px #51247a33}.scale-bar{width:80px;height:4px;background:var(--color-scale-bar);border-radius:2px}.scale-label{font-size:.75rem;font-weight:600;color:var(--color-fg)}.z-ui{z-index:10}.z-popup{z-index:50}.full-screen{position:absolute;top:0;left:0;width:100vw;height:100vh}html,body{height:100%;margin:0;overflow:hidden}body,button,.view-btn,.tooltip-text,.loader-text{font-family:var(--font-base)!important;margin:0;padding:0}button{background:transparent;border:none;cursor:pointer}.full-screen{position:absolute;top:0;left:0;width:100vw;height:100vh;background:var(--canvas-bg)}#threeCanvas,#thinSectionViewer{position:absolute;top:0;left:0;width:100vw;height:100vh;background:var(--canvas-bg);opacity:0;transition:opacity var(--anim-duration) var(--anim-ease);pointer-events:none;z-index:0}#threeCanvas.active,#thinSectionViewer.active{opacity:1;pointer-events:auto;z-index:1}#metaSidebarToggle{position:fixed;top:60px;right:70px;width:40px;height:40px;background:var(--color-panel);border-radius:50%;box-shadow:var(--shadow-ui);display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:10}#metaSidebarToggle .icon{width:24px;height:24px;stroke:var(--color-primary)}.meta-sidebar{position:fixed;top:0;right:-360px;width:320px;height:100%;background:var(--color-panel);box-shadow:-4px 0 12px #00000014;transition:right .35s ease;padding:24px 20px;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);font-family:var(--font-base);z-index:150;pointer-events:none}.meta-sidebar.open{right:0;pointer-events:auto}.meta-header h3{font-size:1.1rem;font-weight:600;color:var(--color-primary);display:flex;align-items:center;gap:8px;margin:0 0 16px}.meta-section{border-left:3px solid var(--color-secondary);padding-left:12px;margin-bottom:24px}.meta-section h4{display:flex;align-items:center;gap:6px;font-size:.95rem;font-weight:600;color:var(--color-primary);margin:0 0 4px}.meta-section p,.meta-section div{font-size:.85rem;color:var(--color-fg);line-height:1.4}.rock-name{position:fixed;top:var(--ui-offset);right:var(--ui-offset);display:flex;align-items:center;gap:var(--ui-gap);background:var(--color-panel);color:var(--color-primary);padding:var(--ui-padding) calc(var(--ui-padding) * 1.75);border-radius:var(--ui-radius);font-size:var(--font-scale);font-weight:600;font-family:var(--font-base);box-shadow:var(--shadow-ui);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:10;white-space:nowrap;max-width:90vw;animation:fadeIn var(--anim-duration) var(--anim-ease)}.rock-name .icon{width:var(--icon-size);height:var(--icon-size);stroke:var(--color-primary)}#toggleTheme{position:fixed;top:60px;right:20px;width:40px;height:40px;background:var(--color-panel);border-radius:50%;box-shadow:var(--shadow-ui);display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:10}#toggleTheme .icon{width:24px;height:24px;stroke:var(--color-primary);transition:transform .2s ease}#toggleTheme:hover .icon{transform:scale(1.1)}.scale-ui{position:fixed;bottom:var(--toolbar-padding);left:var(--toolbar-padding);display:flex;align-items:center;gap:10px;background:var(--color-panel);padding:8px 12px;border-radius:12px;box-shadow:var(--shadow-ui);-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);animation:fadeIn var(--anim-duration) var(--anim-ease);z-index:200}.scale-ui .icon{width:20px;height:20px;stroke:var(--color-primary);flex-shrink:0}.scale-content{display:flex;flex-direction:column;align-items:flex-start}.scale-bar{width:80px;height:4px;background:var(--color-scale-bar);margin-bottom:4px;border-radius:2px}.scale-label{font-size:.75rem;font-weight:600;color:var(--color-fg);font-family:var(--font-base)}.toolbar-ui{position:fixed;bottom:var(--toolbar-padding);left:50%;transform:translate(-50%);display:flex;gap:var(--toolbar-padding);background:var(--color-panel);padding:var(--toolbar-padding) calc(var(--toolbar-padding));border-radius:calc(var(--toolbar-padding) * 2);box-shadow:var(--shadow-ui);z-index:10;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);animation:fadeIn var(--anim-duration) var(--anim-ease)}.toolbar-ui button{background:transparent;border:none;border-radius:var(--toolbar-padding);padding:var(--toolbar-padding);cursor:pointer;transition:transform .2s ease,box-shadow .2s ease;display:flex;align-items:center;justify-content:center}.toolbar-ui button:hover{transform:scale(1.1);box-shadow:0 4px 12px #51247a33}.toolbar-ui .icon{width:var(--toolbar-icon-size);height:var(--toolbar-icon-size);stroke:var(--color-primary);stroke-width:2}.loupe2d{position:absolute;width:100px;height:100px;border-radius:50%;border:2px solid var(--color-primary);background:var(--color-panel);box-shadow:0 4px 12px #00000026;overflow:hidden;pointer-events:none;z-index:220;transform:translate(-50%,-50%)}.view-toggle-ui{position:fixed;top:var(--ui-offset);left:50%;transform:translate(-50%);display:flex;background:var(--color-panel);border-radius:var(--ui-radius);padding:var(--toolbar-padding);box-shadow:var(--shadow-ui);-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);gap:var(--ui-gap);z-index:20}.toggle-background{position:absolute;top:0;left:0;width:50%;height:100%;background:var(--color-primary);border-radius:calc(var(--ui-radius) * .8);transition:transform .3s ease;z-index:0}.view-btn{display:inline-flex;align-items:center;justify-content:center;gap:var(--ui-gap);background:transparent;border:none;padding:var(--ui-padding);border-radius:calc(var(--ui-padding) * .8);font-family:var(--font-base);font-size:var(--font-scale);cursor:pointer;color:var(--color-primary);transition:color .3s ease;z-index:1}.view-btn.active{color:#fff}.view-btn .icon{width:var(--toolbar-icon-size);height:var(--toolbar-icon-size);stroke:currentColor}.tooltip-btn{position:relative;display:inline-flex}.tooltip-text{position:absolute;bottom:130%;left:50%;transform:translate(-50%);background:var(--color-tooltip-bg);color:var(--color-tooltip-fg);font-size:.75rem;padding:6px 10px;border-radius:8px;white-space:nowrap;box-shadow:var(--shadow-popup);opacity:0;pointer-events:none;transition:opacity .3s ease,transform .3s ease;z-index:50;font-weight:500}.tooltip-btn:hover .tooltip-text{opacity:1;transform:translate(-50%) translateY(-4px)}.tooltip-text:after{content:"";position:absolute;top:100%;left:50%;transform:translate(-50%);border:6px solid transparent;border-top-color:var(--color-tooltip-bg)}.tooltip-text--left{top:50%;left:auto;right:calc(100% + 2px);transform:translateY(-50%)}.tooltip-text--left:after{top:50%;left:100%;transform:translateY(-50%);border-left-color:var(--color-tooltip-bg)}#loader3D,.geo-loader{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:100;display:none}.geo-loader{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:16px;animation:fadeIn var(--anim-duration) var(--anim-ease)}.circle-loader{stroke-dasharray:90,150;animation:dash 1.5s ease-in-out infinite;color:var(--color-primary)}.loader-text{font-size:1rem;font-weight:600;color:var(--color-fg);margin-top:16px}.rock-list{position:fixed;top:50%;left:1%;z-index:20;background:#ffffffe6;padding:10px;border-radius:8px;max-height:60vh;overflow-y:auto;box-shadow:var(--shadow-popup)}.rock-list h3{margin:10px 0 5px;font-size:.9em}.rock-list button{display:block;width:100%;margin-bottom:5px;font-size:.9em;padding:4px 6px;background:var(--color-fg);color:var(--color-bg);border-radius:5px}.rock-list button:hover{background:#ddd}.anno-popup,.ts-popup{position:absolute;background:var(--color-bg);border-radius:12px;padding:16px 20px;max-width:280px;font-size:.85rem;color:var(--color-fg);box-shadow:var(--shadow-popup);transform:translate(-50%,-100%);animation:popupFade var(--anim-duration) var(--anim-ease);pointer-events:auto;z-index:50;border-left:4px solid var(--color-primary)}.close-anno{position:absolute;top:10px;right:10px;background:transparent;border:none;cursor:pointer;padding:4px;color:var(--color-fg);z-index:10;display:flex;align-items:center;justify-content:center}.close-anno .icon,.close-anno svg{stroke:var(--color-fg)!important;fill:none!important}@keyframes popupFade{0%{opacity:0;transform:translate(-50%,-110%)}to{opacity:1;transform:translate(-50%,-100%)}}@media screen and (max-width: 1280px){.toolbar-ui{position:fixed;bottom:0;left:0;right:0;transform:none;width:100%;justify-content:space-around;flex-wrap:wrap;padding:var(--toolbar-padding) 0 var(--toolbar-padding) 0}.toolbar-ui button{padding:calc(var(--toolbar-padding) * .8)}.toolbar-ui .icon{width:calc(var(--toolbar-icon-size) * 1.2);height:calc(var(--toolbar-icon-size) * 1.2)}.scale-ui{bottom:calc(var(--toolbar-height) * 2.5 + var(--scale-bar-gap));left:var(--toolbar-padding)}.rock-name{position:fixed;top:calc(var(--ui-offset) + var(--toggle-height) * 2.5 + var(--ui-gap));left:50%;transform:translate(-50%);right:auto;max-width:90vw}#metaSidebarToggle,#toggleTheme{position:fixed;right:var(--ui-offset);transform:none}#metaSidebarToggle{top:var(--ui-offset);width:40px;height:40px;margin-bottom:var(--ui-gap)}#toggleTheme{top:calc(var(--ui-offset) + 40px + var(--ui-gap));width:40px;height:40px}}
